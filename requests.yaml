variables:
  baseUrl: www.localhost.com
  port: 8080

before:
  - request:
      method: GET
      url: http://localhost:8080/
    expect:
      statusCode: 200
      assertions:
        person firstname: John
test_sets:
  - test_set:
    retries: 1
    tests:
      - request:
          method: GET
          url: http://localhost:8080/
        expect:
          statusCode: 202
        keep:
          loc: host
      - request:
          method: POST
          url: http://localhost:8080/
        expect:
          statusCode: 201
  - test_set:
    retries: 1
    tests:
      - request:
          method: PUT
          url: http://${loc}:8080/
          body: '{"name": "dimitris","id": "1"}'
          header:
            Content-Type: application/json
        expect:
          statusCode: 202
          assertions:
            name: dimitris
        keep:
          myval: name
after:
  - request:
      method: GET
      url: http://localhost:8080/
    expect:
      statusCode: 201
      assertions:
        person firstname: John